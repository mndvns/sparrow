// @import 'index'
@import 'nib'
@import 'icons.css'

li
  list-style none


.wf-loading
  visibility hidden

.wf-active
  visibility visible


.capitalize
  text-transform capitalize



gap = 2px
fontSize = 16px
bg-color = #fcfcfc
Duration = 600ms

ceiling-height = 50px
topnav-height = 55px
topnav-padding = 15px


.gap-top
  margin-top gap!important

.alert .close
a
  color #777
  &:hover
    cursor default!important
    text-decoration none
    color #444

.centered
  text-align center

.tall
  height 100%

.full
  width 100%

.accord
  h4
  p
    margin-top 0
    margin-bottom 0
    padding 10px 0
  a.active:hover
    opacity 0.6
  .body
    display none

trans(a)
  transition-property a
  transition-duration Duration
  transition-timing-function ease-out
  transition-delay 0

anim(a)
  animation-name a
  animation-duration Duration
  animation-timing-function ease


h(a)
  font-size (fontSize * a)

h1
  h( 2.2 )
h2
  h( 1.8 )
h3
  h( 1.5 )

h1, h2, h3
  line-height fontSize * 2.5
  &.smashed
    line-height 1.15

html
  overflow-x hidden
  // transform scale(0.7)

html
body
.content
.container
.current
.next
  height 100%!important

body
input
textarea
button
  font-family "proxima-nova"
  color #666

body
  cursor default
  background-color bg-color
  font-size fontSize
  line-height 1.5
  background-color rgba(0, 0, 0, 0)
  position relative
  overflow-x hidden
  overflow-y scroll
  &.transitioning
    background-color rgba(1, 0, 0, 0)
    trans(background-color)

.greeting
  padding-top 20px
  padding-bottom 25px
  margin-top 0
  margin-bottom 0
  h2
  p
  .btn
    margin-bottom 25px
    display block

.content
  left 0
  width 200%
  position absolute
  .transitioning.from_account &
  .transitioning.to_about &
    trans(left)
    left 100%
  .transitioning.to_account &
  .transitioning.from_about &
    trans(left)
    left -100%
  .transitioning.to_home &
    ul.links
      anim(hideTopnav)
  .transitioning.from_home &
    ul.links
      anim(showTopnav)

@keyframes hideTopnav
  0%
    height topnav-height + topnav-padding
  100%
    height 0

@keyframes showTopnav
  0%
    height 0
  100%
    height topnav-height + topnav-padding

.current
.next
  width 50%
  height 100%
  position absolute

.next
  display none
  .transitioning.to_account &
  .transitioning.from_about &
    left 50%
    display block
  .transitioning.from_account &
  .transitioning.to_about &
    left -50%
    display block

.current
  .topnav.home
    ul.links
      height 0

.account_offer
  .offer
    margin-top 30px
    margin-bottom 10px


textarea
input[type="text"]
input[type="password"]
input[type="datetime"]
input[type="datetime-local"]
input[type="date"]
input[type="month"]
input[type="time"]
input[type="week"]
input[type="number"]
input[type="email"]
input[type="url"]
input[type="search"]
input[type="tel"]
input[type="color"]
.uneditable-input
.btn
  border-radius 0!important
  padding round(fontSize / 2)!important
  text-shadow none

  background rgba(white, .6)
  border-color rgba(black, .2)
  box-shadow none
  font-size fontSize
  line-height 1.25

  &.btn
    text-transform uppercase
    border-color transparent
    cursor default
    margin 0 auto
    &.centered
      display block
    .input-append &
      margin-left -1px



textarea
  height auto

label
  cursor default
  i
    text-indent 10px
    opacity 0.4
    &:hover
      opacity 0.9

nav.ceiling
  $padding = 30px
  fixed top right
  trans(height background)
  min-height ceiling-height
  width 100%
  z-index 200
  padding 0 $padding
  box-sizing border-box
  i
    padding-right 10px

  .logout
  .login
    relative right
    span
      relative right

  .toggler-group
    absolute top
    z-index 100
    vertical-align middle
    line-height ceiling-height
    span
    a
      color rgba(white, .7)
    a
      relative top
      span
        line-height ceiling-height
        vertical-align middle
      &.active
      &:hover
        color white
    &.left
      left $padding
    &.right
      right $padding

  a
    &:hover
      color rgba(white, .7)
  .btn.clr-bg
    &:hover
      background rgba(white, .4)
  .terrace > div
    display none
  .terrace
    relative top
    z-index 50
    width 100%
    // display none
    // opacity 0
    overflow hidden
    padding fontSize 0 (fontSize / 2)
    .inputs
    .controls
      float none
      display inline-block
      text-align center
      margin 0 auto
      width 100%

    input
    button
    .alert.in
    .navigation
      margin-bottom (fontSize / 2)
      text-align center
      float none
      border none

    .navigation
      text-align center

    [data-slip-show='false']
      display none
      opacity 0

    p
    .alert
    buttons.active
    a.active
      color rgba(white, .7)!important


@keyframes ceiling-expand
  from
    height 0%
  to
    height 100%

// @keyframes ceiling-expand
//   from
//     height ceiling-height
//   to
//     height ceiling-height + topnav-height + topnav-padding

.navbar
  .navbar-inner
    border-radius 0

.navbar.topnav
  height = topnav-height
  absolute top
  margin-top ceiling-height
  background none
  width 100%
  z-index 100
  opacity 1
  .container
    relative top
    padding-top 0
  .navbar-inner
    background none!important
    border none
    box-shadow none

  a.shift
  .links a
    margin-top topnav-padding
    opacity 0.7
    &.active
    &:hover
      opacity 1

  ul.links
    overflow hidden
    margin 0 auto
    text-align center
    a
      height topnav-height
      box-sizing border-box
      border-bottom 2px solid
      display inline-block
      line-height 35px
      padding 0 20px 0
      cursor default
      &.active
      &:hover
        color white
      span
        display block
        font-size 12px
        text-transform uppercase
        line-height 20px
        letter-spacing 1px
      i
        height = height * 0.4
        height height
        line-height height
        font-size height
        margin-top 5px

  .shift-block
    &.left
      left fontSize
    &.right
      right fontSize

  .shift-block
  a.shift
    position absolute
    display inline-block
    height height
    line-height height - 5
    font-size (height / 2)
    z-index 100
    width (fontSize * 3)

  a.shift
    text-align center
    &[disabled]
      opacity 0.3
      color rgba(black, .3)
      text-shadow 0 0 20px gray
    &:hover
      color rgba(black, 0.5)






.navbar.account-offer
  padding-top 20px
  .navbar-inner
    padding 0 0
    background none
    border none
    box-shadow none
  ul
    width 100%
  li
    height = 40px
    font-size round(fontSize * .75)
    line-height height
    height height
    text-transform uppercase
    text-align center
    color rgba(white, 0.7)
    letter-spacing 1px
    text-shadow none
    font-weight 300
    opacity .6
    *
      vertical-align middle
    &.active
      opacity 1
    &:hover
      opacity 0.9
    i
      font-size 15px
      padding-right 5px
      line-height height

.content > div > .container
  position relative
  margin-top 150px

spanner(a, b)
  if odd(b)
    width floor(a * b)
  if even(b)
    width ceil(a * b)
  margin-left 0
  &.margin
    if odd(b)
      width floor((a * b) - gap)
    if even(b)
      width floor((a * b) - gap)
    &.left
      margin-left gap
    &.right
      margin-right gap
    &.left.right
      if odd(b)
        width floor((a * b) - (gap * 2))
      if even(b)
        width ceil((a * b) - (gap * 2))

Spanner(a)
  u = (a / 12)
  .container
  .navbar-static-top .container
  .navbar-fixed-top .container
  .navbar-fixed-bottom.container
    width a
  .long
    .span12
    &.span12
      spanner(u, 12)
    .span11 
    &.span11 
      spanner(u, 11)
    .span10 
    &.span10 
      spanner(u, 10)
    .span9 
    &.span9 
      spanner(u, 9)
    .span8 
    &.span8 
      spanner(u, 8)
    .span7 
    &.span7 
      spanner(u, 7)
    .span6 
    &.span6 
      spanner(u, 6)
    .span5 
    &.span5 
      spanner(u, 5)
    .span4 
    &.span4 
      spanner(u, 4)
    .span3 
    &.span3 
      spanner(u, 3)
    .span2 
    &.span2 
      spanner(u, 2)
    .span1 
    &.span1 
      spanner(u, 1)


Spanner( 940px )

.extend
  padding-right (gap * .5)

@media (min-width: 1200px)
  Spanner( 1170px )
  .extend
    padding-right gap

@media (min-width: 768px) and (max-width: 979px)
  Spanner( 724px )

@media (min-width: 481px) and (max-width: 767px)
  Spanner( 480px )

@media (max-width: 480px)
  .container
    width auto
  .long
    [class*="span"]
      width 100%!important
      margin-left 0!important
  .extend
    padding-right 0

.long
  textarea
  input
    box-sizing border-box
  input
    height round(fontSize * 2.5)
  [class*="span"]
    float left

.offer-tag-list
  i
    relative top
    display inline-block
    z-index 100
    font-size 22px
    height fontSize - 1
    top -1px
    pad = 7px
    padding-left pad
    padding-right pad
  li
  span
    user-select none
  li
    relative top
    &[data-group=tags]
      float right
      width 100%
      box-sizing border-box
      .actions
        absolute right

.offer-tag-list
.hero
  margin-top -23px
  relative top
  minHeight = 230px
  min-height minHeight
  color white
  .list
    display block
    min-height minHeight
  .headline
    absolute top -45px left 15%
    z-index 100
    width 70%
    text-align center
    background none
    font-weight 500
    line-height 40px
    // font-family "ff-tisa-web-pro"
    text-shadow none
    // span
    //   color rgba( white, .8 )!important

    div
      // &.tagset span
      //   &:after
      //     content "\00a0 the "
      &.tag span
        &:nth-child(n+2)
          &:before
            content ",\00a0"
    div
      display inline
    span
      display inline-block
      opacity 0
      font-size 0px
  ul
    font-weight 500
    letter-spacing 1px
    padding 10px 0
    text-align center
    &[data-active]
      display none
      &[data-active=true]
        display block
    li
      trans(opacity)
      transition-duration 100ms
      padding 10px
      overflow hidden
      &[data-active]
      &.inactive
        background "transparent"
        opacity .5
        &:hover
          opacity .8
      &[data-active=true]
      &.active:hover
        opacity .9


.offers
  min-height 50%
  display block

.offer

  height = 170px
  bumper = 2px
  action(a, b)
    text-align right
    line-height ((height / a) - (gap / 2))
    margin-bottom (gap * b)
    padding-right (bumper + 10)
    box-sizing border-box
    position relative
    overflow hidden!important
    .bumper
      opacity .3
    &.busy
    &[data-status=active]
    &:hover
    &[disabled]
      .bumper
        opacity 1
    &[disabled]
      color lightGray

  font-weight normal
  relative top
  width 100%
  float left
  min-height height
  margin (gap / 2) 0
  .bumper
    width bumper
    height 100%
    absolute top
    z-index 2
    &.left
      absolute left
    &.right
      absolute right
  section
    span, p, li, i, div
      color rgba(0,0,0, 0.9)
      text-shadow 0 1px 0 white
  section
    float left
  &.voted
    background #eee
  .symbol
    user-select none
    height height
    div
      font-size 4em
      line-height 100px
      height 100px
      width 100px
      text-align center
      margin 35px auto
      background-size cover
      background-position 50%
      backgound-repeat no-repeat
      border-radius 100px
      .transitioning &
        display none
  .field
    &[data-field=name]
      font-weight 300
      font-size 32px
      margin 20px 0 15px
      display block
      text-transform lowercase
    &[data-field=business]
      font-weight 900
      text-transform uppercase
      font-size 11px
      letter-spacing 1px
    &[data-field=description]
      size = round(fontSize * .9)
      font-size size
      line-height fontSize
      text-transform none
      letter-spacing 0px
      margin-bottom 5px

  section.main
    height height
    *
      padding-right 20px

  section.actions
    height height
    user-select none
    ul
      display block
      height 100%
      width 100%
      margin 0
      padding 0
      li
        action(4, 1)

  section.data
    padding 0 0 0 0
    height height
    overflow hidden
    after = 10px
    actual = 20px
    mix-after()
      font-size after
      line-height after
    mix-actual()
      font-size actual
      line-height actual
      padding-top 10px
      font-weight 300
    div
      float left
      height 100%
      position relative
      span
        relative left 10%
        width 80%
        display block
        &.actual
          mix-actual()
        &.after
          mix-after()
      &.price
        span:first-letter
          font-size after
          line-height after
          vertical-align top
          font-weight normal
      &.updatedAt
        span
          font-size s = round((actual + after) * 0.4)
          line-height (s * 0.8)
      .metric
        absolute bottom
        width 100%
        padding-bottom 85px
        z-index 3
        height 100%
        max-height 85px
      .bg
        absolute bottom 100%
        width 100%
        height 100%
        z-index 2
        margin-bottom gap


    i.glyph
      absolute bottom left
      font-size 25px
      padding 10px 0
      width 100%
      z-index 10

  .extension
    relative top
    margin-top gap
    width 100%
    display none
    header
      text-align center
      padding 10px
      font-size 20px
      margin gap 0
    &[data-extension=map]
      .inner
        height height
      .address
        font-weight 500
        margin-top 20%
        text-align center
        text-transform capitalize
    &[data-extension=message]
      .inner
        position relative
        height (height / 2)
      .message-area
        action(2, 0)
        width 100%
        height 100%
        absolute top left
        font-size 16px
        opacity 1
        text-align center
      textarea
        width 100%
        height 100%
        absolute top left
        z-index 1
        font-size 16px
        line-height 24px
        padding 15px
        padding-left 25px
        border none
        box-sizing border-box
        &:focus
          box-shadow none
      .send
        action(2, 0)
        position absolute
        right 0
    &[data-extension=reserve]
      // display block



#Tagsets
  ul
    li
      margin-right 20px
      font-size 20px
      display inline
#tags
  ul
    float left

.editor
  h1
    text-align center
    padding 20px 0

.help-unit
  .intro
  h3
    text-align center
  div
    padding-bottom 2em

.file-table
  .file
    float left
    padding 1px
    box-sizing border-box
    text-align center
    div.image
      width 100%
      min-height 100px
      background-size contain
      .transitioning &
        display none
    img
      .transitioning &
        display none
    span
      font = fontSize * 2
      size = fontSize * 3
      font-size font
      height size
      line-height size
      display inline-block
      padding (fontSize / 2) 0
      margin 0 (fontSize / 2)
      box-sizing border-box
      color white
      opacity .7
      &[data-status='active']
      &:hover
        opacity 1
      i
        display inline
        height size
        line-height size


.glyphs-list
  .inner
    margin 0 auto
    float none
    position relative
  .glyph
    float left
    text-align center
    background #eee
    height 100px
    line-height 100px
    margin-top gap
    div
      font-size 35px
  .color-bucket
    absolute top
    height 100%
    width 100%
    background blue

.data
  padding-bottom 15px
  text-align center

input.color
  color white
  text-align center

.icon
  opacity 0.7
  display inline
  text-align center
  &:hover
    opacity 1
    span
      opacity 1
  i
    font-size 2em
    padding 20px
  span
    display inline
    opacity .5

.accounts-dialog
  .additional-link
    text-transform none
    letter-spacing 0
    font-weight normal
    text-decoration none!important
    padding 3px 3px 0

.alert
  border-radius 0
  text-shadow none
  .clr-bg &
    color white
  &:first-letter
    text-transform capitalize
  &.alert-blend-in
    background none
    border none
    line-height 0
    padding 0 (fontSize * 2) 0 fontSize
    margin 0
    opacity 0
    &.in
      trans(opacity padding line-height)
      opacity 1
      line-height 1.5
      margin-bottom (fontSize / 2) 0


.dhtmlx_message_area
  fixed right 5px
  top 83px!important
  width 250px
  z-index 1000
  *
    font-family "proxima-nova"
  .dhtmlx-info
    transition all .5s ease
    z-index 10000
    display block
    min-width 120px
    height height
    line-height height
    padding 5px 15px
    box-shadow 0 1px 5px rgba(black, 0.1)
    border none
    border-radius 0
    font-weight 600
    margin 5px
    margin-bottom 10px
    opacity 1
    overflow hidden
    i
      padding 2px 15px 2px 0
      vertical-align middle
      font-size 30px
      line-height height
      height 100%
      margin 0
      float left
      position relative
    div
      border-radius 0
      border none
      background none
      padding 0
      margin 0
      height height
      line-height height
    &.hidden
      height 0
      overflow hidden
      padding 0
      opacity 0
      margin 0
    status(col)
      desat = desaturate(darken(col, 30%), 80%)
      background desaturate(lighten(col, 90%), 40%)
      color desat
      border-bottom 1px solid rgba(desat, 0.7)
      border-left 1px solid rgba(desat, 0.4)
      border-right 1px solid rgba(desat, 0.4)
      border-top 1px solid rgba(desaturate(col, 60%), 0.5)
    &[class*="success"]
      status(#89dd7c)
    &[class*="warning"]
      status(#db7d7d)
    &[class*="neutral"]
      status(#9696aa)

.message-container
  color = rgba(white, .3)
  background color
  margin-bottom 20px
  footer
  article > *
    padding 20px
  article
    border-bottom 1px solid rgba(black, .15 )
    relative top
    overflow hidden
    *
      box-sizing border-box
    .from
      font-weight bold
    .inner
    textarea
      border none
      border-left 2px solid rgba(black, 0.3)
      padding-left 10px
      box-sizing border-box
    .sent
      absolute right
      height 100%
      text-align center
    &.compose
      light = rgba(white, .8)
      color light
      textarea
        width 100%
        box-shadow none
        border-color rgba(black, .5)
        color light
      .sent
        background rgba(white, .01)
        font-weight bold
        &:hover
          background rgba(white, .1)


.modal
  &.fade
    top -35%
  border-radius 0
  .alert
    &.fade
      display none
      &.in
        display block
  button.clr-bg
    color rgba(white, 1)
    text-shadow 0 -1px 0 rgba(black, 0.7)
    &:hover
      color rgba(white, 1)
  textarea
  button
  input
    width 100%
    box-sizing border-box
    height 32px

#intro
  text-align center
  shadow = inset 0 100px 500px -51px rgba(255,255,255, 0.3)
  .clr-gradient
    box-shadow shadow
  button
    height 100%
    box-shadow shadow
  .body
    .span4
      background blue
      height 100px

// #prologue
//   h1,h2,h3,h4,h5,h6
//     text-align center

////////////////////////////////////////////////
//$$ dynamic stylesheet

.clr-text
  transition color 100ms ease 0

.clr-bg
  &.help-mode
    transition background 500ms ease 0
  transition background 200ms ease 0
  &:hover
    transition background 200ms ease 0

Duration = 2000ms

easing(args...)
  transition-easing-function linear
  if args
    transition-duration args!important
  else
    transition-duration 500ms!important

[data-help-block]
  outline = 3px
  box-shadow none
  trans(all)
  &[data-help-block=true]
    outline outline solid transparent
    outline outline solid rgba(black, 0.2)
    overflow visible
    opacity .9!important
    &.offer
      opacity 0
      display none
      &:first-child
        display block
    &:hover
      opacity 1!important
      easing( 200ms )
    transform scale( .75)
    background rgba(white, 0.4)
    box-shadow 0 1px 2px rgba(black, .3)
    *
      trans(all)
      easing()
      opacity 0
    [data-help-block]
      background rgba(white, 0.4)
      opacity 1
      li
        opacity 0!important
    &[help-active=true]
    &[help-active=false]
      transition-duration 200ms
    &[help-active=true]
    &:hover
      transform scale( .8 )
      box-shadow 0 0 60px rgba(white, .25 )
      background rgba(white, .6)
      outline 3px solid rgba(black, .1 )
      [data-help-block]
        background rgba(black, 0)
        outline 3px solid rgba(black, .3 )
        box-shadow 0 1px 2px rgba(black, .2)

//////////////////////////////////////////////
//  $$ help-mode


.clr-bg.dark
  &.help-mode
  .help-mode &
    trans(background-color)
    easing()

body
  trans(all)
  background-color white

.current
  top 0
  trans(transform top)
  .help-mode &
    transform scale( .9 )
    top 50px

.ceiling
  trans(background)
  easing()
  user-select none
  .help-mode &
    overflow visible!important
    background transparent!important

.terrace
  #help
    width 100%
  #help
  #help > p
    display none
    max-height 0
    opacity 0
    margin 0
    padding-bottom 0
    trans(opacity max-height)
  .help-mode &
    absolute top
    overflow visible!important
    height 0
    opacity 1
    #help
    #help > p
      absolute top
      max-height 1000px
      display block
      color white
      opacity 1
      margin 0 auto
    #help
      width 100%
    p
      width 70%
      left 15%
      padding-top (fontSize * 2)
      line-height 1.25
      font-weight normal
      opacity .8
    *
      text-align center
      margin 0 auto

#terrace-alert
  opacity 0
  font-weight 300
  font-family "proxima-nova"
  color rgba(white, .8)
  &.rallying
    opacity 1
    display block
    .terrace-pane
      speed = 300ms
      overflow hidden
      &.rally-in
        anim(rally-in)
        animation-duration speed
      &.rally-out
        anim(rally-in)
        animation-duration speed
        animation-direction reverse
        opacity 0
        display none

@keyframes rally-in
  from
    opacity 0
    transform translateY( -5px )
  to
    opacity 1
    transform translateY( 0 )

#dimmer
  fixed top
  width 100%
  height 100%
  z-index 200
  background white
  display none
  opacity 0

.wrapper
  absolute top left
  display block
  width 100%
  height 100%
  trans(all)

.wrapper
.wrapper.clr-bg.dark
  transition-duration 2000ms!important


s = 90%
l = 40%
variation = 130

prime = hsla(200, s, l, 1)
comp = hsla((hue(prime) + variation), s, l, 1)
triad  = hsla((hue(prime) - variation), s, l, 1)

.clr-gradient
  background linear-gradient(top right, lighten(saturate(prime, 100%), 10%), prime)
  color white
  padding-bottom 20px

a
  color prime
  &:hover
    color darken(prime, 20%)

.clr-text
  color prime
  &.hvr
    &:hover
      color darken(prime, 20%)
  &.clr-bg
    &.hvr
      :hover
        white

clr-bg(a)
  background a
  &.dark
    background darken(a, 50%)
  &.light
    background lighten(a, 50%)
  &.btn
    color white
    &.active
    &:hover
      background darken(a, 20%)

.clr-bg
  clr-bg(prime)
  &.prime
    clr-bg(prime)
  &.comp
    clr-bg(comp)
  &.triad
    clr-bg(triad)

